<script type="text/html" template>
    <link rel="stylesheet" href="{{ layui.setter.base }}style/new-bg.css" media="all">
</script>
<style type="text/css">
  .alarmTip {
    position: fixed;
    top: 50%;
    right: 0px;
    transform: translateY(-50%);
    height: 50px;
    width: 50px;
    z-index: 9999;
  }

  #tip {
    width: 100%;
    height: 100%;
    box-shadow: 0px 1px 4px 0px 
      rgba(255, 152, 0, 0.4);
    border: solid 1px #e58900;
    /*opacity: 0.7;*/
    position: relative;
    cursor: pointer;
    background: url(../src/style/res/icon.png) center center no-repeat;
    background-size: 28px 28px;
    background-color: rgba(255, 152, 0, 0.7);
  }

  .red-tip {
    position: absolute;
    /*width: 14px;*/
    padding: 0 5px;
    height: 14px;
    line-height: 14px;
    font-size: 12px;
    font-family: ArialMT;
    text-align: center;
    top: 0;
    left: 0;
    transform: translate(-50%, -50%);
    background-color: rgba(255, 0, 0, 0.7);
    color: #fff;
    z-index: 99999;
    border-radius: 7px;
  }

  .alarm-list {
    position: absolute;
    top: 0;
    left: -1px;
    transform: translateX(-100%);
    width: 280px;
    height: 268px;
    z-index: 9999;
    background-color: rgba(255, 255, 255, 0.95);
    box-shadow: 0px 1px 4px 0px 
    rgba(165, 165, 165, 0.4);
    box-sizing: border-box;
    overflow: hidden;
    overflow-y: auto;
  }

  .list-title {
    color: #323232;
    height: 32px;
    line-height: 32px;
    border-bottom: 1px solid #f6f6f6;
    padding: 0 10px;
    box-sizing: border-box;
  }

  .list-body {
    height: 236px;
    width: 100%;
    overflow: hidden;
    overflow-y: auto;
    padding: 0 20px;
    box-sizing: border-box;
  }

  .order-list-num {
    background-color: #fbb248;
    width: 16px;
    height: 16px;
    line-height: 16px;
    font-size: 10px;
    color: #ffffff;
    text-align: center;
    float: left;
    margin-right: 7px;
  }

  .order-list-name {
    font-size: 14px;
    color: #323232;
    float: left;
  }

  .record-top {
    height: 16px;
    line-height: 16px;
  }

  .record-list {
    padding: 15px 0 12px 0;
    border-bottom: 1px solid #f6f6f6;
  }

  .order-bottom {
    font-size: 12px;
    letter-spacing: 0px;
    margin-top: 12px;
  }

  .list-info-name {
    color: #888888;
  }

  .list-info-unit {
    color: #ff0000;
  }

  .order-list-info {
    float: left;
  }

  .order-list-time {
    float: right;
  }
  #alarm_list_pop {
    padding: 20px;
    line-height: 22px;
    text-align: center;
  }
  body .demo-class .layui-layer-title{background:#c00; color:#fff; border: none;}

  .layui-side-menu .layui-nav .layui-nav-item .layui-icon {
    height: 40px;
    width: 16px;
  }

  .layui-side-menu .layui-nav .layui-nav-item .layui-icon.synthetical {
    background: url(../src/style/res/icon/synthetical.png) center center no-repeat;
    background-size: 100% auto;
  }
  .layui-side-menu .layui-nav .layui-nav-item .layui-icon.monitor {
    background: url(../src/style/res/icon/monitor.png) center center no-repeat;
    background-size: 100% auto;
  }
  .layui-side-menu .layui-nav .layui-nav-item .layui-icon.operation {
    background: url(../src/style/res/icon/operation.png) center center no-repeat;
    background-size: 100% auto;
  }
  .layui-side-menu .layui-nav .layui-nav-item .layui-icon.decision-making {
    background: url(../src/style/res/icon/decision-making.png) center center no-repeat;
    background-size: 100% auto;
  }
  .layui-side-menu .layui-nav .layui-nav-item .layui-icon.system-manage {
    background: url(../src/style/res/icon/system-manage.png) center center no-repeat;
    background-size: 100% auto;
  }
</style>

<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <!-- 头部区域 -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item layadmin-flexible" lay-unselect>
        <a href="javascript:;" layadmin-event="flexible" title="侧边伸缩">
          <i class="layui-icon layui-icon-shrink-right" id="LAY_app_flexible"></i>
        </a>
      </li>
      <!--<li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="#/user/portal" target="_self" title="前台">
          <i class="layui-icon layui-icon-website"></i>
        </a>
      </li>-->
      <li class="layui-nav-item" lay-unselect>
        <a href="javascript:;" layadmin-event="refresh" title="刷新">
          <i class="layui-icon layui-icon-refresh-3"></i>
        </a>
      </li>

    </ul>
    <ul class="layui-nav layui-layout-right" lay-filter="layadmin-layout-right">

      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="javascript:;" layadmin-event="fullscreen">
          <i class="layui-icon layui-icon-screen-full"></i>
        </a>
      </li>
      <li class="layui-nav-item" lay-unselect>
        <script type="text/html" template lay-url="http://47.101.159.182:8080/jhzhps-back/user/checkLoginInfo"
        lay-done="layui.element.render('nav', 'layadmin-layout-right');">
          <a href="javascript:;">
            <cite>{{ d.data.realName }}</cite>
          </a>
          <dl class="layui-nav-child">
            <dd><a lay-href="set/user/info">基本资料</a></dd>
            <dd><a lay-href="set/user/password">修改密码</a></dd>
            <hr>
            <dd layadmin-event="logout" style="text-align: center;"><a>退出</a></dd>
          </dl>
        </script>
      </li>

      <li class="layui-nav-item layui-hide-xs" lay-unselect>
        <a href="javascript:;" layadmin-event="about"><i class="layui-icon layui-icon-more-vertical"></i></a>
      </li>
      <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-unselect>
        <a href="javascript:;" layadmin-event="more"><i class="layui-icon layui-icon-more-vertical"></i></a>
      </li>
    </ul>
    <input type="hidden" id="roleId"/>
  </div>

  <!-- 侧边菜单 -->
  <div class="layui-side layui-side-menu">
    <div class="layui-side-scroll">
      <script type="text/html" template lay-url="http://47.101.159.182:8080/jhzhps-back/role/getAuthByToken"
      lay-done="layui.element.render('nav', 'layadmin-system-side-menu');" id="TPL_layout">

        <div class="layui-logo" lay-href="">
          <span>{{ layui.setter.name || 'layuiAdmin' }}</span>
        </div>

        <ul class="layui-nav layui-nav-tree" lay-shrink="all" id="LAY-system-side-menu" lay-filter="layadmin-system-side-menu">
        {{#
          var path =  layui.router().path
          ,pathURL = layui.admin.correctRouter(path.join('/'))
          ,dataName = layui.setter.response.dataName
          ,$ = layui.jquery,
          handleObj=function(arrObj){
          	for(var i=0;i<arrObj.length;i++){
          		if(!arrObj[i].checked){
          			arrObj.splice(i,1);
          			i--;
          		}else if(arrObj[i].list){
          				handleObj(arrObj[i]['list'])
          		}
          	}
          };
          
          $("#roleId").val(window.role);
		  d = $.parseJSON('{"data":' + d.data + "}");
		  d.code=0;
		  console.log(d);
		  handleObj(d.data);
		  console.log(d);
		  
          layui.each(d[dataName], function(index, item){
            var hasChildren = typeof item.list === 'object' && item.list.length > 0
            ,classSelected = function(){
              var match = path[0] == item.name || (index == 0 && !path[0])
              || (item.jump && pathURL == layui.admin.correctRouter(item.jump)) || item.spread;
              if(match){
                return hasChildren ? 'layui-nav-itemed' : 'layui-this';
              }
              return '';
            }
            ,url = (item.jump && typeof item.jump === 'string') ? item.jump : item.name;
        }}
          <li data-name="{{ item.name || '' }}" data-jump="{{ item.jump || '' }}" class="layui-nav-item {{ classSelected() }}">
            <a href="javascript:;" {{ hasChildren ? '' : 'lay-href="'+ url +'"' }} lay-tips="{{ item.title }}" lay-direction="2">
              <i class="layui-icon {{ item.icon }}"></i>
              <cite>{{ item.title }}</cite>
            </a>
            {{# if(hasChildren){ }}
              <dl class="layui-nav-child">
              {{# layui.each(item.list, function(index2, item2){
                var hasChildren2 = typeof item2.list == 'object' && item2.list.length > 0
                ,classSelected2 = function(){
                  var match = (path[0] == item.name && path[1] == item2.name)
                  || (item2.jump && pathURL == layui.admin.correctRouter(item2.jump)) || item2.spread;
                  if(match){
                    return hasChildren2 ? 'layui-nav-itemed' : 'layui-this';
                  }
                  return '';
                }
                ,url2 = (item2.jump && typeof item2.jump === 'string')
                  ? item2.jump
                : [item.name, item2.name, ''].join('/');
              }}
                <dd  data-name="{{ item2.name || '' }}"  data-jump="{{ item2.jump || '' }}"
                {{ classSelected2() ? ('class="'+ classSelected2() +'"') : '' }}>
                  <a href="javascript:;" {{ hasChildren2 ? '' : 'lay-href="'+ url2 +'"' }}>{{ item2.title }}</a>
                  {{# if(hasChildren2){ }}
                    <dl class="layui-nav-child">
                      {{# layui.each(item2.list, function(index3, item3){
                        var match = (path[0] == item.name && path[1] == item2.name && path[2] == item3.name)
                        || (item3.jump && pathURL == layui.admin.correctRouter(item3.jump))
                        ,url3 = (item3.jump && typeof item3.jump === 'string')
                          ? item3.jump
                        : [item.name, item2.name, item3.name].join('/')
                      }}
                        <dd data-name="{{ item3.name || '' }}"  data-jump="{{ item3.jump || '' }}"
                        {{ match ? 'class="layui-this"' : '' }}>
                          <a href="javascript:;" lay-href="{{ url3 }}" {{ item3.iframe ? 'lay-iframe="true"' : '' }}>{{ item3.title }}</a>
                        </dd>
                      {{# }); }}
                    </dl>
                  {{# } }}
                </dd>
            {{# }); }}
            </dl>
            {{# } }}
          </li>
        {{# }); }}
        </ul>
      </script>
    </div>
  </div>


  <!-- 页面标签 -->
  <script type="text/html" template lay-done="layui.element.render('nav', 'layadmin-pagetabs-nav')">
    {{# if(layui.setter.pageTabs){ }}
    <div class="layadmin-pagetabs" id="LAY_app_tabs">
      <div class="layui-icon layadmin-tabs-control layui-icon-prev" layadmin-event="leftPage"></div>
      <div class="layui-icon layadmin-tabs-control layui-icon-next" layadmin-event="rightPage"></div>
      <div class="layui-icon layadmin-tabs-control layui-icon-down">
        <ul class="layui-nav layadmin-tabs-select" lay-filter="layadmin-pagetabs-nav">
          <li class="layui-nav-item" lay-unselect>
            <a href="javascript:;"></a>
            <dl class="layui-nav-child layui-anim-fadein">
              <dd layadmin-event="closeThisTabs"><a href="javascript:;">关闭当前标签页</a></dd>
              <dd layadmin-event="closeOtherTabs"><a href="javascript:;">关闭其它标签页</a></dd>
              <dd layadmin-event="closeAllTabs"><a href="javascript:;">关闭全部标签页</a></dd>
            </dl>
          </li>
        </ul>
      </div>
      <div class="layui-tab" lay-unauto lay-allowClose="true" lay-filter="layadmin-layout-tabs">
        <ul class="layui-tab-title" id="LAY_app_tabsheader">
          <li lay-id="/"><i class="layui-icon layui-icon-home"></i></li>
        </ul>
      </div>
    </div>
    {{# } }}
  </script>


  <!-- 主体内容 -->
  <div class="layui-body" id="LAY_app_body">
    <div class="layadmin-tabsbody-item layui-show"></div>
  </div>

  <!-- 辅助元素，一般用于移动设备下遮罩 -->
  <div class="layadmin-body-shade" layadmin-event="shade"></div>

  <div class="alarmTip">
    <div id="tip">
      <div class="red-tip">0</div>
      <div class="alarm-list" style="display: none;">
        <div class="list-title">报警列表</div>
        <div class="list-body">
          
        </div>
      </div>
    </div>
  </div>

</div>

<script type="text/javascript">
	layui.use('addAlarmList', layui.factory('addAlarmList'));
</script>